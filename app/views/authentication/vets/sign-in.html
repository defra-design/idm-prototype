{% extends "/layouts/main.html" %}
{% set showBackLink = true %}
{% set serviceName = "Get funding to improve animal health and welfare" %}

{% set pageHeading = "Sign in to get funding to improve animal health and welfare" %}
{% set pageSection = "" %}
{% block pageTitle %}{{ macroPageTitle.pageTitle(pageHeading) }}{% endblock %}

{% block content %}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        {% if data['status'] == "error-messages" %}

            {{ govukErrorSummary({
                titleText: "There is a problem",
                errorList: [
                    { text: "Enter your 10-digit customer reference number (CRN)", href: "#" },
                    { text: "Enter your password", href: "#" }                    
                ]
            }) }}

        {% elif data['status'] == "error-messages-2" %}

            {{ govukErrorSummary({
                titleText: "There is a problem",
                errorList: [
                    { text: "Check you have entered your 10-digit customer reference number (CRN) correctly", href: "#" }                                       
                ]
            }) }}

        {% elif data['status'] == "error-messages-3" %}

            {{ govukErrorSummary({
                titleText: "There is a problem",
                errorList: [
                    { text: "Enter a valid 10-digit customer reference number (CRN) and password", href: "#" }                                       
                ]
            }) }}

        {% endif %}

        {{ macroPageHeader.pageHeader(pageHeading,pageSection) }}

            {% if data ['companySize'] == "None" %}
            <form action="/authentication/nothing-registered" autocomplete="false">        
            {% elif data['companySize'] == "Single" %}
            <form action="/authentication/vets/check-details" autocomplete="false">
            {% else %}
            <form action="/authentication/select-your-business" autocomplete="false">
            {% endif %}        
            

                {% if data['status'] == "error-messages" %}

                    {{ govukInput({
                        label: {
                            text: "Customer reference number (CRN)",                        
                            isPageHeading: false
                        },
                        hint: {
                            text: "This is the - number emailed to you when you registered with the Rural Payments service." 
                        },
                        classes: "govuk-!-width-two-thirds",
                        errorMessage: {
                            text: "Enter your 10-digit customer reference number (CRN)"
                        },
                        id: "crnNumber",
                        name: "crnNumber"
                    }) }}

                    {{ govukInput({
                        label: {
                            text: "Password",                      
                            isPageHeading: false
                        },
                        hint: {
                            text: "This is your Rural Payments service password." 
                        },
                        classes: "govuk-!-width-two-thirds",
                        errorMessage: {
                            text: "Enter your password"
                        },
                        id: "crnPassword",
                        name: "crnPassword"                        
                    }) }}
                
                {% elif data['status'] == "error-messages-2" %}

                    {{ govukInput({
                        label: {
                            text: "Customer reference number (CRN)",                        
                            isPageHeading: false
                        },
                        hint: {
                            text: "This is the 10-digit number emailed to you when you registered with the Rural Payments service." 
                        },
                        classes: "govuk-!-width-two-thirds",
                        errorMessage: {
                            text: "Check you have entered your 10-digit customer reference number (CRN) correctly"
                        },
                        id: "crnNumber",
                        name: "crnNumber"
                    }) }}

                    {{ govukInput({
                        label: {
                            text: "Password",                      
                            isPageHeading: false
                        },
                        hint: {
                            text: "This is your Rural Payments service password." 
                        },
                        classes: "govuk-!-width-two-thirds",
                        id: "crnPassword",
                        name: "crnPassword"                        
                    }) }}

                {% elif data['status'] == "error-messages-3" %}
                
                    <div class="govuk-form-group govuk-form-group--error">

                    {{ govukInput({
                        label: {
                            text: "Customer reference number (CRN)",                        
                            isPageHeading: false
                        },
                        hint: {
                            text: "This is the 10-digit number emailed to you when you registered with the Rural Payments service." 
                        },
                        classes: "govuk-!-width-two-thirds",
                        errorMessage: {
                            text: "Enter a valid 10-digit customer reference number (CRN) and password"
                        },
                        id: "crnNumber",
                        name: "crnNumber"
                    }) }}

                    {{ govukInput({
                        label: {
                            text: "Password",                      
                            isPageHeading: false
                        },
                        hint: {
                            text: "This is your Rural Payments service password." 
                        },
                        classes: "govuk-!-width-two-thirds",
                        errorMessage: {
                            text: ""
                        },
                        id: "crnPassword",
                        name: "crnPassword"                        
                    }) }}

                </div>

                {% else %}

                    {{ govukInput({
                        label: {
                            text: "Customer reference number (CRN)",                        
                            isPageHeading: false
                        },
                        hint: {
                            text: "This is the 10-digit number emailed to you when you registered with the Rural Payments service." 
                        },
                        classes: "govuk-!-width-two-thirds",
                        id: "crnNumber",
                        name: "crnNumber"
                    }) }}

                    {{ govukInput({
                        label: {
                            text: "Password",                      
                            isPageHeading: false
                        },
                        hint: {
                            text: "This is your Rural Payments service password." 
                        },
                        classes: "govuk-!-width-two-thirds",
                        id: "crnPassword",
                        name: "crnPassword"                                               
                    }) }}

                {% endif %}
                
                {{ govukButton({
                    text: "Sign in"                    
                }) }}
        
            </form>
      
            <!-- New -->
            <!-- <h2 class="govuk-heading-m">Problems signing in</h2>
            <ul class="govuk-list">
                <li><a href="/authentication/password/reset">I have forgotten my password</a></li>
                <li><a href="/authentication/password/reset">I have forgotten my customer reference number (CRN)</a></li>
                <li><a href="/authentication/password/reset">I have forgotten my customer reference number (CRN) and password</a></li>
            </ul> -->

            <!-- Current -->
            <p class="govuk-body"><a href="/authentication/password/reset" class="govuk-link govuk-link--no-visited-state">I have forgotten my password</a></p>
            <!-- // -->


            <details class="govuk-details govuk-!-margin-top-7" data-module="govuk-details">
                <summary class="govuk-details__summary">
                    <span class="govuk-details__summary-text">Help signing in</span>
                </summary>
                <div class="govuk-details__text">
                    <p>Contact the Rural Payments Agency by email or phone if:</p>        
                    <ul class="govuk-list govuk-list--bullet">
                        <li>you have forgotten your CRN</li>
                        <li>you have lost your CRN</li>
                        <li>your CRN is not recognised</li>
                    </ul>

                    <p>Email: <a href="mailto:ruralpayments@defra.gov.uk">ruralpayments@defra.gov.uk</a></p>
                    <p>Telephone: 03000 200 301
                    <br>Monday to Friday, 8:30am to 5pm, except bank holidays</p>
                
                    <p class="govuk-body"><a href="https://www.gov.uk/call-charges" class="govuk-link" rel="noreferrer noopener" target=”_blank”>Find out about call charges (opens in new tab)</p>                                
                    <p><a href="https://www.ruralpayments.service.gov.uk/">Register with the Rural Payments service</a> if you do not have an account.</p>
                </div>
            </details>
       
    </div>
    
    <div class="govuk-grid-column-one-third review">      
        <ul class="govuk-list govuk-body-s govuk-!-text-align-right">             
            <li><a href="/authentication/vets/sign-in?status=" class="govuk-link govuk-link--no-visited-state">No error</a></li>                    
            <li><a href="/authentication/vets/sign-in?status=error-messages" class="govuk-link govuk-link--no-visited-state">Error message 1</a></li>        
            <li><a href="/authentication/vets/sign-in?status=error-messages-2" class="govuk-link govuk-link--no-visited-state">Error message 2</a></li>        
            <li><a href="/authentication/vets/sign-in?status=error-messages-3" class="govuk-link govuk-link--no-visited-state">Error message 3</a></li>                                
        </ul>      
    </div>

    


</div>
{% endblock %}
