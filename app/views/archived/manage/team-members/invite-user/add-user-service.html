{% extends "layout.html" %}

{% set title = "Which service do you want this person to use?" %}

{% block pageTitle %}
    {{title}} - GOV.UK
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back",
    href: "javascript:history.back()"
  }) }}
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <form class="add-user-roles" onsubmit="return myFunction()" method="post">
      <script>
        const form = document.querySelector('.add-user-roles')

        function myFunction() {
          const checked = document.querySelector('[name="serviceLine"]:checked')
          const checkedValue = checked.value

          switch(checkedValue){
            case 'Comply with UK REACH':
            form.action = '../invite-user/chemicals/add-user-roles-service-roles'

            break;
            case 'Apply for Export Catch Certificate':
            form.action = '../invite-user/exports/add-user-roles-service-roles'

            break;
            case 'VMD Secure Messaging':
            form.action = '../invite-user/enrollment-confirmation?serviceRole=Standard user'

            break;
            case 'IPAFFS':
            form.action = '../invite-user/enrollment-confirmation?serviceRole=Standard user'

            break;
            case 'Export Certificate':
            form.action = '../invite-user/enrollment-confirmation?serviceRole=Standard user'

            break;
            case 'None':
            form.action = ''
          }
          return true
        }
      </script>

        {{ govukRadios({
          idPrefix: "serviceLine",
          name: "serviceLine",
          fieldset: {
            legend: {
              text: title,
              isPageHeading: true,
              classes: "govuk-fieldset__legend--xl"
            }
          },
          items: [

            {
              value: "Comply with UK REACH",
              html: 'Comply with UK REACH',
              checked:  checked('serviceLine','Comply with UK REACH')
            },
            {
              value: "Apply for Export Catch Certificate",
              html: 'Apply for Export Catch Certificate',
              checked:  checked('serviceLine','Apply for Export Catch Certificate')
            },
            {
              value: "VMD Secure Messaging",
              html: 'VMD Secure Messaging',
              checked:  checked('serviceLine','VMD Secure Messaging')
            },
            {
              value: "IPAFFS",
              html: 'IPAFFS',
              checked:  checked('serviceLine','IPAFFS')
            },
            {
              value: "Export Certificate",
              html: 'Export Health Certificate',
              checked:  checked('serviceLine','Export Certificate')
            }
          ]
        }) }}

        {{ govukButton({
          text: "Continue"
        }) }}



      </form>
    </div>
  </div>




{% endblock %}
